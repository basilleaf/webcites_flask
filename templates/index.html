<!DOCTYPE>
<html>
    <head>
    <h1>Interactive geo citation webs</h1>
    <link rel="stylesheet" href="http://cdn.leafletjs.com/leaflet/v0.7.7/leaflet.css" />
    <link rel="stylesheet" type="text/css" href="static/style.css">
    <link href='https://api.mapbox.com/mapbox.js/v2.2.3/mapbox.css' rel='stylesheet' />
    <script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>
    </head>
    <body>
    <div id="map" style="width: 90%; height: 90%"></div>
    <script src="http://cdn.leafletjs.com/leaflet/v0.7.7/leaflet.js"></script>
    <script src='https://api.mapbox.com/mapbox.js/v2.2.3/mapbox.js'></script>
    <script>
        var map = L.map('map').setView([0, 0], 2);
        
        L.tileLayer('https://api.tiles.mapbox.com/v4/{id}/{z}/{x}/{y}.png?access_token={accessToken}', {
        attribution: 'Map data &copy; <a href="http://openstreetmap.org">OpenStreetMap</a> contributors, <a href="http://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>, Imagery Â© <a href="http://mapbox.com">Mapbox</a>',
        maxZoom: 18,
        id: 'mapbox.streets',
        accessToken: 'pk.eyJ1IjoicmpzbWV0aHVyc3QiLCJhIjoiY2lnbG56YnplMDE0M3RjbTNkems5cWI0aCJ9.ekUxiCzi_8dwkUinlpr1YQ'
        }).addTo(map);

        url = '/locations/2015MNRAS.450..435S/' 
        alert('going ' + url)
        $.getJSON(url, function(data) {

            alert(JSON.stringify(data))

            var marker = L.marker([51.75952470000001, -1.2584172]).addTo(map);
                marker.bindPopup("This is the first author's institution").togglePopup();
            
            var coauthor1 = L.marker([47.3768866, 8.541694]).togglePopup('This is a co-author institution.'),
                coauthor2 = L.marker([32.8797081, -117.2350537]).togglePopup('This is a co-author instituion')
                coauthor3 = L.marker([44.975331, -93.23461309999999]).togglePopup('This is a co-author instituion')
            var coauthors = L.layerGroup([coauthor1, coauthor2, coauthor3]);
            
            var basicMaps = {
                "First Author Institute(s)":marker 
            };
            
            var overlayMaps = {
                 "Co-author Institutions": coauthors
                };
            L.control.layers(basicMaps, overlayMaps).addTo(map);

        });
        

        
    </script>
    </body>
</html>